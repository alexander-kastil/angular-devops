name: cd static webapp

# trigger:
#   branches:
#     include:
#       - master

trigger: none
pr: none

pool:
  vmImage: ubuntu-latest

variables:
  conAz: scRG
  img: 'angular-devops:latest'
  app: angular-demo-app
  rg: angular-11152

stages:
- stage: Deploy
  displayName: Deploy to ACA

  jobs:
    - job: Deploy
      steps:
      - task: AzureContainerApps@1
        inputs:
          azureSubscription: 'scRG'
          acrName: 'angularacr11152'
          acrUsername: 'angularacr11152'
          acrPassword: 'SdG7N4ssrvVQrbxoXR+lFhdTRs58q6Yise4JU25RQM+ACRDNfh9J'
          imageToDeploy: '$(img)'
          containerAppName: '$(app)'
          resourceGroup: '$(rg)'
          containerAppEnvironment: 'angular-env'
          targetPort: '80'
          ingress: 'external'
